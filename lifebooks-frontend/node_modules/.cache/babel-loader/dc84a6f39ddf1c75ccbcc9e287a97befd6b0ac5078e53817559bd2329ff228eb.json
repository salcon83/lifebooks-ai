{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import LandingPage from'./components/LandingPage';import Login from'./components/Login';import Register from'./components/Register';import Dashboard from'./components/Dashboard';import StoryEditor from'./components/StoryEditor';import VoiceRecorder from'./components/VoiceRecorder';import BookCoverCreator from'./components/BookCoverCreator';import Publishing from'./components/Publishing';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Check for existing token on app load\nconst token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){try{setUser(JSON.parse(userData));}catch(error){console.error('Error parsing user data:',error);localStorage.removeItem('token');localStorage.removeItem('user');}}setLoading(false);},[]);const handleLogin=(userData,token)=>{setUser(userData);localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(userData));};const handleLogout=()=>{setUser(null);localStorage.removeItem('token');localStorage.removeItem('user');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading Lifebooks...\"})]});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(LandingPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(Register,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/story/:id?\",element:user?/*#__PURE__*/_jsx(StoryEditor,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/voice\",element:user?/*#__PURE__*/_jsx(VoiceRecorder,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/covers\",element:user?/*#__PURE__*/_jsx(BookCoverCreator,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/publish\",element:user?/*#__PURE__*/_jsx(Publishing,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","LandingPage","Login","Register","Dashboard","StoryEditor","VoiceRecorder","BookCoverCreator","Publishing","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","token","localStorage","getItem","userData","JSON","parse","error","console","removeItem","handleLogin","setItem","stringify","handleLogout","className","children","path","element","to","onLogin","onLogout"],"sources":["/home/ubuntu/lifebooks-ai/lifebooks-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport LandingPage from './components/LandingPage';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport StoryEditor from './components/StoryEditor';\nimport VoiceRecorder from './components/VoiceRecorder';\nimport BookCoverCreator from './components/BookCoverCreator';\nimport Publishing from './components/Publishing';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing token on app load\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    \n    if (token && userData) {\n      try {\n        setUser(JSON.parse(userData));\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    setLoading(false);\n  }, []);\n\n  const handleLogin = (userData, token) => {\n    setUser(userData);\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(userData));\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading Lifebooks...</p>\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          <Route \n            path=\"/\" \n            element={user ? <Navigate to=\"/dashboard\" /> : <LandingPage />} \n          />\n          <Route \n            path=\"/login\" \n            element={user ? <Navigate to=\"/dashboard\" /> : <Login onLogin={handleLogin} />} \n          />\n          <Route \n            path=\"/register\" \n            element={user ? <Navigate to=\"/dashboard\" /> : <Register onLogin={handleLogin} />} \n          />\n          <Route \n            path=\"/dashboard\" \n            element={user ? <Dashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/login\" />} \n          />\n          <Route \n            path=\"/story/:id?\" \n            element={user ? <StoryEditor user={user} /> : <Navigate to=\"/login\" />} \n          />\n          <Route \n            path=\"/voice\" \n            element={user ? <VoiceRecorder user={user} /> : <Navigate to=\"/login\" />} \n          />\n          <Route \n            path=\"/covers\" \n            element={user ? <BookCoverCreator user={user} /> : <Navigate to=\"/login\" />} \n          />\n          <Route \n            path=\"/publish\" \n            element={user ? <Publishing user={user} /> : <Navigate to=\"/login\" />} \n          />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}